var $r=Object.defineProperty;var Wr=(T,S,Q)=>S in T?$r(T,S,{enumerable:!0,configurable:!0,writable:!0,value:Q}):T[S]=Q;var W=(T,S,Q)=>(Wr(T,typeof S!="symbol"?S+"":S,Q),Q);(function(T){typeof define=="function"&&define.amd?define(T):T()})(function(){var pt,_t;"use strict";var T,S,Q,ne,he,Fe=-1,U=function(e){addEventListener("pageshow",function(t){t.persisted&&(Fe=t.timeStamp,e(t))},!0)},ve=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},re=function(){var e=ve();return e&&e.activationStart||0},C=function(e,t,n,r){var i=ve(),o="navigate";return n?o=n:Fe>=0?o="back-forward-cache":i&&(document.prerendering||re()>0?o="prerender":document.wasDiscarded?o="restore":i.type&&(o=i.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:o,navigationId:r||1}},q=function(e){return PerformanceObserver.supportedEntryTypes.includes("soft-navigation")&&(e==null?void 0:e.reportSoftNavs)},Le=function(e){return e&&e!==1?window.performance&&performance.getEntriesByType&&performance.getEntriesByType("soft-navigation")[e-2]:window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},k=function(e,t,n){var r=q(n);try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver(function(o){Promise.resolve().then(function(){t(o.getEntries())})});return i.observe(Object.assign({type:e,buffered:!0,includeSoftNavigationObservations:r},n||{})),i}}catch{}},E=function(e,t,n,r){var i,o;return function(u){t.value>=0&&(u||r)&&((o=t.value-(i||0))||i===void 0)&&(i=t.value,t.delta=o,t.rating=function(s,a){return s>a[1]?"poor":s>a[0]?"needs-improvement":"good"}(t.value,n),e(t))}},ie=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},oe=function(e){var t=function(n){n.type!=="pagehide"&&document.visibilityState!=="hidden"||e(n)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},R=-1,He=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},ae=function(e){document.visibilityState==="hidden"&&R>-1&&(R=e.type==="visibilitychange"?e.timeStamp:0,Pt())},Ne=function(){addEventListener("visibilitychange",ae,!0),addEventListener("prerenderingchange",ae,!0)},Pt=function(){removeEventListener("visibilitychange",ae,!0),removeEventListener("prerenderingchange",ae,!0)},ge=function(){return R<0&&(R=He(),Ne(),U(function(){setTimeout(function(){R=He(),Ne()},0)})),{get firstHiddenTime(){return R}}},Y=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},ye=[1800,3e3],$e=function(e,t){var n=q(t=t||{});Y(function(){var r,i=ge(),o=C("FCP"),u=k("paint",function(s){s.forEach(function(a){if(a.name==="first-contentful-paint"){n?(a.navigationId||1)>1&&(g="soft-navigation",b=a.navigationId,o=C("FCP",0,g,b),r=E(e,o,ye,t.reportAllChanges)):u.disconnect();var f=0;if(a.navigationId&&a.navigationId!==1){var d=Le(a.navigationId),h=(d==null?void 0:d.startTime)||0;f=Math.max(a.startTime-h,0)}else f=Math.max(a.startTime-re(),0);(a.startTime<i.firstHiddenTime||a.navigationId&&a.navigationId>1)&&(o.value=f,o.entries.push(a),o.navigationId=a.navigationId||1,r(!0))}var g,b})},t);u&&(r=E(e,o,ye,t.reportAllChanges),U(function(s){o=C("FCP",0,"back-forward-cache",o.navigationId),r=E(e,o,ye,t.reportAllChanges),ie(function(){o.value=performance.now()-s.timeStamp,r(!0)})}))})},me=[.1,.25],wt=function(e,t){var n,r,i=q(t=t||{}),o=!1;$e((n=function(){var u,s=C("CLS",0),a=0,f=[],d=function(b,p){s=C("CLS",0,b,p),u=E(e,s,me,t.reportAllChanges),a=0,o=!1},h=function(b){b.forEach(function(p){if(i&&p.navigationId&&p.navigationId>s.navigationId&&(a>s.value&&(s.value=a,s.entries=f),u(!0),d("soft-navigation",p.navigationId)),!p.hadRecentInput){var B=f[0],N=f[f.length-1];a&&p.startTime-N.startTime<1e3&&p.startTime-B.startTime<5e3?(a+=p.value,f.push(p)):(a=p.value,f=[p])}}),a>s.value&&(s.value=a,s.entries=f,u())},g=k("layout-shift",h,t);g&&(u=E(e,s,me,t.reportAllChanges),oe(function(){h(g.takeRecords()),u(!0),o=!0}),U(function(){d("back-forward-cache",s.navigationId),ie(function(){return u()})}),i&&k("soft-navigation",function(b){b.forEach(function(p){p.navigationId&&p.navigationId>s.navigationId&&(o||u(!0),d("soft-navigation",p.navigationId),u=E(e,s,me,t.reportAllChanges))})},t),setTimeout(u,0))},r=!1,function(u){r||(n(u),r=!0)}))},Z={passive:!0,capture:!0},Tt=new Date,We=function(e,t){T||(T=t,S=e,Q=new Date,ze(removeEventListener),Qe())},Qe=function(){if(S>=0&&S<Q-Tt){var e={entryType:"first-input",name:T.type,target:T.target,cancelable:T.cancelable,startTime:T.timeStamp,processingStart:T.timeStamp+S};ne.forEach(function(t){t([e])}),ne=[]}},Et=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(n,r){var i=function(){We(n,r),u()},o=function(){u()},u=function(){removeEventListener("pointerup",i,Z),removeEventListener("pointercancel",o,Z)};addEventListener("pointerup",i,Z),addEventListener("pointercancel",o,Z)}(t,e):We(t,e)}},ze=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,Et,Z)})},pe=[100,300],Bt=function(e,t){var n=q(t=t||{});Y(function(){var r,i=ge(),o=C("FID"),u=function(a){a.forEach(function(f){var d,h;n?(f.navigationId||1)>1&&(d="soft-navigation",h=f.navigationId,o=C("FID",0,d,h),r=E(e,o,pe,t.reportAllChanges)):s.disconnect(),f.startTime<i.firstHiddenTime&&(o.value=f.processingStart-f.startTime,o.entries.push(f),o.navigationId=f.navigationId||1,r(!0))})},s=k("first-input",u,t);r=E(e,o,pe,t.reportAllChanges),s&&oe(function(){u(s.takeRecords()),n||s.disconnect()}),s&&U(function(){var a;o=C("FID",0,"back-forward-cache",o.navigationId),r=E(e,o,pe,t.reportAllChanges),ne=[],S=-1,T=null,ze(addEventListener),a=u,ne.push(a),Qe()})})},_e=0,ue=1/0,K=0,Ve=1,Ge=!1,Ct=function(e){e.forEach(function(t){t.interactionId&&(Ge&&t.navigationId&&t.navigationId>Ve&&(Ve=t.navigationId,_e=0,ue=1/0,K=0),ue=Math.min(ue,t.interactionId),K=Math.max(K,t.interactionId),_e=K?(K-ue)/7+1:0)})},Ue=function(){return he?_e:performance.interactionCount||0},Dt=function(e){"interactionCount"in performance||he||(Ge=e||!1,he=k("event",Ct,{type:"event",buffered:!0,durationThreshold:0,includeSoftNavigationObservations:e}))},be=[200,500],qe=0,Re=function(){return Ue()-qe},F=[],Pe={},xe=function(e){var t=F[F.length-1],n=Pe[e.interactionId];if(n||F.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};Pe[r.id]=r,F.push(r)}F.sort(function(i,o){return o.latency-i.latency}),F.splice(10).forEach(function(i){delete Pe[i.id]})}},Ot=function(e,t){var n=q(t=t||{}),r=!1;Y(function(){Dt(n);var i,o=C("INP"),u=function(d,h){F=[],qe=d==="soft-navigation"?0:Ue(),o=C("INP",0,d,h),i=E(e,o,be,t.reportAllChanges),r=!1},s=function(){var d,h,g=(h=Math.min(F.length-1,Math.floor(Re()/50)),F[h]);g&&(g.latency!==o.value||(d=t)!==null&&d!==void 0&&d.reportAllChanges)&&(o.value=g.latency,o.entries=g.entries)},a=function(d){d.forEach(function(h){n&&h.navigationId&&h.navigationId>o.navigationId&&(r||(s(),o.value>0&&i(!0)),u("soft-navigation",h.navigationId)),h.interactionId&&xe(h),h.entryType==="first-input"&&!F.some(function(g){return g.entries.some(function(b){return h.duration===b.duration&&h.startTime===b.startTime})})&&xe(h)}),s(),i()},f=k("event",a,{durationThreshold:t.durationThreshold||40,opts:t});i=E(e,o,be,t.reportAllChanges),f&&(f.observe({type:"first-input",buffered:!0,includeSoftNavigationObservations:n}),oe(function(){a(f.takeRecords()),o.value<0&&Re()>0&&(o.value=0,o.entries=[]),i(!0)}),U(function(){u("back-forward-cache",o.navigationId),ie(function(){return i()})}),n&&k("soft-navigation",function(d){d.forEach(function(h){h.navigationId&&h.navigationId>o.navigationId&&(!r&&o.value>0&&i(!0),u("soft-navigation",h.navigationId),i=E(e,o,be,t.reportAllChanges))})},t))})},Je=[2500,4e3],Mt=function(e,t){var n=!1,r=q(t=t||{});Y(function(){var i,o=ge(),u=C("LCP"),s=function(h,g){u=C("LCP",0,h,g),i=E(e,u,Je,t.reportAllChanges),n=!1},a=function(h){h.forEach(function(g){if(g){g.navigationId&&g.navigationId>u.navigationId&&(n||i(!0),s("soft-navigation",g.navigationId));var b,p=0;g.navigationId!==1&&g.navigationId?p=Math.max(g.startTime-(((b=Le(g.navigationId))===null||b===void 0?void 0:b.startTime)||0),0):p=Math.max(g.startTime-re(),0),g.startTime<o.firstHiddenTime&&(u.value=p,u.entries=[g],u.navigationId=g.navigationId||1,i())}})},f=function(){n||(a(d.takeRecords()),r||d.disconnect(),n=!0,i(!0))},d=k("largest-contentful-paint",a,t);d&&(i=E(e,u,Je,t.reportAllChanges),["keydown","click"].forEach(function(h){addEventListener(h,f,!0)}),oe(f),U(function(h){s("back-forward-cache",u.navigationId),ie(function(){u.value=performance.now()-h.timeStamp,n=!0,i(!0)})}),r&&k("soft-navigation",function(h){h.forEach(function(g){g.navigationId&&g.navigationId>u.navigationId&&(n||i(!0),s("soft-navigation",g.navigationId))})},t))})},we=[800,1800],St=function e(t){document.prerendering?Y(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},It=function(e,t){var n=q(t=t||{}),r=C("TTFB"),i=E(e,r,we,t.reportAllChanges);St(function(){var o=ve();if(o){var u=o.responseStart;if(u<=0||u>performance.now())return;r.value=Math.max(u-re(),0),r.entries=[o],i(!0),U(function(){r=C("TTFB",0,"back-forward-cache",r.navigationId),(i=E(e,r,we,t.reportAllChanges))(!0)}),n&&k("soft-navigation",function(s){s.forEach(function(a){a.navigationId&&(r=C("TTFB",0,"soft-navigation",a.navigationId),(i=E(e,r,we,t.reportAllChanges))(!0))})},t)}})},jt=function(e){return{evid:180,src:72,endpoint:"pulse",params:e}};const At=[[/\/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}(\/|$)/g,"/:guid$1"],[/\/[0-9a-fA-F]{24,}(\/|$)/g,"/:id$1"],[/\/[0-9]{12}(\/|$)/g,"/:id$1"],[/\/[0-9]{4}-[0-9]{2}-[0-9]{2}(\/|$)/g,"/:date$1"],[/\/comp-[a-zA-Z0-9]{8}(\/|$)/g,"/:id$1"],[/\/$/,""]],kt=e=>{const t=new URL(e);return At.forEach(([n,r])=>{t.pathname=t.pathname.replace(n,r)}),t.search="",t.toString()};class Ft{constructor(t,n,r,i){W(this,"_queue",new Set);W(this,"_logger");W(this,"_url");W(this,"_platform");W(this,"_metadata");this._url=kt(t),this._platform=n,this._logger=r,this._metadata=i}flushQueue(){if(this._queue.size>0){const t={};this._queue.forEach(({name:n,value:r})=>{t[n]=r});try{const n=JSON.stringify(t),r=JSON.stringify(this._metadata);this._logger.report(jt({platform:this._platform,url:this._url,webVitals:n,metadata:r}))}catch(n){console.error(n)}this._queue.clear()}}addToQueue(t){const{name:n,value:r}=t;this._queue.add({name:n,value:r})}}class Lt{constructor(t,n,r={}){W(this,"_platform");W(this,"_logger");W(this,"_metadata");this._platform=t,this._logger=n,this._metadata=r,this._init()}_init(){const t=new Ft(window.location.href,this._platform,this._logger,this._metadata);It(n=>t.addToQueue(n),{reportSoftNavs:!0}),$e(n=>t.addToQueue(n),{reportSoftNavs:!0}),Mt(n=>t.addToQueue(n),{reportSoftNavs:!0}),wt(n=>t.addToQueue(n),{reportSoftNavs:!0}),Bt(n=>t.addToQueue(n),{reportSoftNavs:!0}),Ot(n=>t.addToQueue(n),{reportSoftNavs:!0}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&t.flushQueue()}),addEventListener("pagehide",t.flushQueue)}}var P=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ht(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Nt(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Xe={},z={},A={},$t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function zt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var H=function(e){zt(t,e);function t(n){Wt(this,t);var r=Qt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.name=r.constructor.name,r}return t}(Error);function Vt(e,t){if(e===void 0)throw new H(t)}function Gt(e,t){if(e!==void 0&&((typeof e>"u"?"undefined":$t(e))!=="object"||Array.isArray(e)||e===null))throw new H(t)}function Ut(e,t){if(!e)throw new H(t)}function qt(e,t){if(e!==void 0&&typeof e!="function")throw new H(t)}function Rt(e,t){if(e!==void 0&&typeof e!="boolean")throw new H(t)}function xt(e,t){if(e!==void 0&&typeof e!="number")throw new H(t)}function Jt(e,t){if(typeof Array.isArray=="function"){if(!Array.isArray(e))throw new H(t)}else if(Object.prototype.toString.call(e)!=="[object Array]")throw new H(t)}A.defined=Vt,A.object=Gt,A.ok=Ut,A.func=qt,A.boolean=Rt,A.number=xt,A.array=Jt,A.AssertionError=H;var Te={};Te.mapValues=function(e,t){return e?Object.keys(e).reduce(function(n,r){return n[r]=t(e[r],r,e),n},{}):{}},Te.filterValues=function(e,t){return e?Object.keys(e).reduce(function(n,r){var i=t(e[r],r,e);return i&&(n[r]=e[r]),n},{}):{}};var Ee={};Ee.timedPromise=function(e,t){var n=t.message,r=t.timeout,i=new Promise(function(o,u){setTimeout(u,r,n?"Timeout: "+n:"Timeout")});return Promise.race([e,i])},Ee.allAsObject=function(e){var t=Object.keys(e);return Promise.all(t.map(function(n){return e[n]})).then(function(n){return n.reduce(function(r,i,o){return r[t[o]]=i,r},{})})};var Xt={error:function(){if(console&&console.error){var t;(t=console).error.apply(t,arguments)}}};function Yt(e,t,n){var r=void 0;return function(){var i=this,o=arguments,u=function(){r=null,n||e.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(u,t),s&&e.apply(i,o)}}var Zt=Yt;function Kt(e,t){var n=void 0;return function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];n||(n=setTimeout(function(){e.apply(void 0,i),n=null},t))}}var en=Kt,tn=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),nn=function(){function e(t,n){var r=[],i=!0,o=!1,u=void 0;try{for(var s=t[Symbol.iterator](),a;!(i=(a=s.next()).done)&&(r.push(a.value),!(n&&r.length===n));i=!0);}catch(f){o=!0,u=f}finally{try{!i&&s.return&&s.return()}finally{if(o)throw u}}return r}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var on=Zt,an=en,un=function(t,n,r){return{dt:Date.now()-r,f:t,context:n}},sn=function(t,n){return{dt:Date.now()-n,e:t,g:{}}},cn=function(t){var n={},r=t.e.length,i=t.e.map(function(u){var s=Object.keys(u.f).map(function(a){var f=u.f[a],d=a+"|"+f;return n[d]=n[d]||0,n[d]++,[a,f,d]});return Be({},u,{f:s})}),o={};return i=i.map(function(u){var s=u.f.reduce(function(a,f){var d=nn(f,3),h=d[0],g=d[1],b=d[2];return n[b]===r?o[h]=g:a[h]=g,a},{});return Be({},u,{f:s})}),Be({},t,{e:i,g:o})},fn=function(){function e(){rn(this,e),this._initilized=!1}return tn(e,[{key:"_reset",value:function(){var n=this;this._startTime=Date.now(),this._resolve=null,this._promise=new Promise(function(r){return n._resolve=r})}},{key:"init",value:function(n,r){var i=this,o=n.delayMs,u=n.maxBatchSize,s=n.useThrottle,a=n.optimizeBatch;this._initilized||(this._maxBatchSize=u,this._optimizeBatch=a,this._queue=[],this._flushHandler=r,this._flushDebounced=s?an(function(){return i.flush()},o):on(function(){return i.flush()},o),this._initilized=!0,this._reset())}},{key:"flush",value:function(){if(!this._queue.length)return Promise.resolve();var n=this._queue.splice(0,this._queue.length),r=this._resolve,i=this._startTime;this._reset();var o=sn(n,i);return this._optimizeBatch&&(o=cn(o)),this._flushHandler(o).then(r)}},{key:"feed",value:function(n,r){return this._queue.push(un(n,r,this._startTime)),this._queue.length===this._maxBatchSize?this.flush():(this._flushDebounced(),this._promise)}}]),e}(),Ce=fn,ln={functional:!0,analytics:!0,__default:!0},dn=function(t){return typeof t=="function"&&t()||ln},Ye=function(t){return t.functional===!1||t.analytics===!1},hn=function(t,n){return n==="essential"?!1:n==="functional"||n==="analytics"?t[n]===!1:Ye(t)},vn={shouldMuteNonEssentials:Ye,shouldMuteByCategory:hn,getPolicy:dn},x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gn=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function yn(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function mn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var J=A,Ze=Te,Ke=Ze.mapValues,et=Ze.filterValues,tt=Ee,pn=Xt,_n=Ce,De=vn,bn=De.shouldMuteByCategory,nt=De.shouldMuteNonEssentials,Pn=De.getPolicy,wn=function(){function e(t,n){mn(this,e),this._publishers=t.publishers,this._validators=t.validators||[],this._defaults=t.defaults,this._ownDefaults={},this._events=t.events||{},this._context=n||{},this._defaultValueTimeout=t.defaultValueTimeout||5e3,this._defaultContinueOnFail=t.defaultContinueOnFail||!1,this._onPublisherFailHandler=t.onPublisherFailHandler||e._defaultPublisherFailHandler,this._isMuted=t.isMuted||function(){return!1},this._eventTransformer=t.eventTransformer||function(r){return r},this._payloadTransformer=t.payloadTransformer||function(r){return r},this._consentPolicyGetter=t.consentPolicyGetter||function(){return null},this._nonEssentialDefaults=t.nonEssentialDefaults||{},this._maxBatchSize=t.maxBatchSize||100,this._globalBatchQueue=t.globalBatchQueue}return gn(e,[{key:"report",value:function(n){J.defined(n,"Data must be provided"),J.object(n,"Data must be an object");var r=n.src,i=n.evid,o=n.params,u=yn(n,["src","evid","params"]);return this.log(x({src:r,evid:i},o),u)}},{key:"log",value:function(n,r,i){var o=this;J.defined(n,"Event object or event key must be provided.");var u=this._extractEventAndContext(n,r,i),s=u.event,a=u.context,f=Pn(this._consentPolicyGetter),d=x({},this._context,a);if(this._isMuted()||bn(f,d.category))return Promise.resolve();if(d.useBatch){var h=this._initQueue(d,f),g=function(B){var N=o._eventTransformer(B,d);return h.feed(N,d)};if(this._globalBatchQueue)return this._getDefaults(this._defaults).then(function(p){var B=x({},p,o._getDynamicNonEssentialDefaults(f),o._getStaticNonEssentialDefaults(f),s,o._getPolicyFields(f,d.category));return g(B)});var b=x({},this._getDynamicDefaults(this._defaults),this._getDynamicNonEssentialDefaults(f),s,this._getPolicyFields(f,d.category));return g(b)}return this._getDefaults(this._defaults).then(function(p){var B=Object.assign(p,o._getDynamicNonEssentialDefaults(f),o._getStaticNonEssentialDefaults(f),s,o._getPolicyFields(f,d.category)),N=o._validators.length===0?!0:o._validators.some(function(c){return c.match(B)&&(c.execute(B)||!0)});if(!N)throw new Error("No validator accepted the event. Source: "+B.src+" Evid: "+(B.evid||B.evtId));var l=o._eventTransformer(B,d);return l=o._payloadTransformer(l,d),o._send(l,d)})}},{key:"flush",value:function(){return this._queue?this._queue.flush():Promise.resolve()}},{key:"updateDefaults",value:function(n){return J.defined(n,"Defaults must be provided"),J.object(n,"Defaults must be an object"),Object.assign(this._ownDefaults,n),this}},{key:"_send",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Promise.all(this._publishers.map(function(o){var u=x({},n);return Promise.resolve().then(function(){return o(u,i)}).catch(function(s){return r._onPublisherFailHandler(s,{publisherName:o.name,payload:n})})})).then(function(){})}},{key:"_extractEventAndContext",value:function(n,r,i){var o=void 0,u={};if(typeof n!="string")o=n,u=r||u;else{if(o=this._events[n],!o)throw new J.AssertionError("Event with key '"+n+"' not found in event map.");r&&(o=x({},o,r),u=i||u)}return{event:o,context:u}}},{key:"_initQueue",value:function(n,r){var i=this;if(this._queue)return this._queue;this._queue=this._globalBatchQueue||new _n;var o=function(s){i._globalBatchQueue||(s.g=Object.assign(i._getStaticDefaults(i._defaults),i._getStaticNonEssentialDefaults(r)));var a=i._payloadTransformer(s,n);return i._send(a,n)};return this._queue.init({delayMs:n.useBatch===!0?300:n.useBatch,maxBatchSize:this._maxBatchSize,useThrottle:!!this._globalBatchQueue,optimizeBatch:!!this._globalBatchQueue},o),this._queue}},{key:"_handleDefaultsError",value:function(n){return this._defaultContinueOnFail?(pn.error(n),null):Promise.reject(n)}},{key:"_getDynamicNonEssentialDefaults",value:function(n){if(!nt(n))return this._getDynamicDefaults(this._nonEssentialDefaults)}},{key:"_getStaticNonEssentialDefaults",value:function(n){if(!nt(n))return this._getStaticDefaults(this._nonEssentialDefaults)}},{key:"_withOwnDefaults",value:function(n){return Object.assign({},n,this._ownDefaults)}},{key:"_getDynamicDefaults",value:function(n){n=this._withOwnDefaults(n);var r=et(n,function(i){return typeof i=="function"});return Ke(r,function(i){return i()})}},{key:"_getStaticDefaults",value:function(n){n=this._withOwnDefaults(n);var r=et(n,function(i){return typeof i!="function"});return r}},{key:"_getDefaults",value:function(n){var r=this;if(n=this._withOwnDefaults(n),!n)return Promise.resolve({});var i=Ke(n,function(o,u){if(typeof o=="function")try{o=o()}catch(s){return r._handleDefaultsError(s)}return o&&typeof o.then=="function"?tt.timedPromise(o,{message:"Cannot get default value '"+u+" for BI Event'",timeout:r._defaultValueTimeout}).catch(function(s){return r._handleDefaultsError(s)}):o});return tt.allAsObject(i)}},{key:"_encodePolicyValue",value:function(n,r){return n?typeof n[r]=="boolean"?n[r]?1:0:n[r]:1}},{key:"_getPolicyFields",value:function(n,r){return{_isca:this._encodePolicyValue(n,"analytics"),_iscf:this._encodePolicyValue(n,"functional"),_ispd:n.__default?1:0,_ise:r==="essential"?1:0}}}],[{key:"_defaultPublisherFailHandler",value:function(n,r){var i=r.publisherName;return i}}]),e}(),rt=wn,Tn=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function En(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var it=A,ot=function(){function e(){En(this,e),this.reset()}return Tn(e,[{key:"reset",value:function(){this._handlers=[]}},{key:"onLoggerCreated",value:function(n){var r=this;return it.defined(n,"Handler must be provided."),it.func(n,"Handler must be a function."),this._handlers.push(n),function(){var i=r._handlers.indexOf(n);i!==-1&&r._handlers.splice(i,1)}}},{key:"notifyLoggerCreated",value:function(n){this._handlers.forEach(function(r){return r(n)})}}]),e}(),at={manager:new ot,BiLoggerManager:ot},Bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=A,On=rt,Mn=at,Sn=Ce,In=function(){function e(){Dn(this,e),this._publishers=[],this._validators=[],this._defaults={},this._nonEssentialDefaults={},this._events={},this._isMuted=!1,this._eventTransformer=null,this._payloadTransformer=null,this._consentPolicyGetter=null,this._maxBatchSize=null,this._batchQueue=null}return Cn(e,[{key:"addPublisher",value:function(n){return _.defined(n,"Publisher must be provided"),_.ok(typeof n=="function","Expected a publisher function"),this._publishers.push(n),this}},{key:"addValidator",value:function(n){return _.defined(n,"Validator must be provided"),_.ok((typeof n>"u"?"undefined":Bn(n))==="object"&&n,"Expected a validator object"),_.ok(n.execute&&n.match,"Provided validator does not match the interface"),this._validators.push(n),this}},{key:"setDefaults",value:function(n){return _.defined(n,"Defaults must be provided"),_.object(n,"Defaults must be an object"),this._defaults=n,this}},{key:"updateDefaults",value:function(n){return _.defined(n,"Defaults must be provided"),_.object(n,"Defaults must be an object"),Object.assign(this._defaults,n),this}},{key:"updateNonEssentialDefaults",value:function(n){return _.defined(n,"Non-essential Defaults must be provided"),_.object(n,"Non-essential Defaults must be an object"),Object.assign(this._nonEssentialDefaults,n),this}},{key:"setEvents",value:function(n){return _.defined(n,"Events must be provided"),_.object(n,"Events must be an object"),this._events=n,this}},{key:"setDefaultValueTimeout",value:function(n){return _.defined(n,"Default Value Timeout must be provided"),this._defaultValueTimeout=n,this}},{key:"setDefaultContinueOnFail",value:function(n){return _.defined(n,"Default Continue On Fail must be provided"),this._defaultContinueOnFail=n,this}},{key:"setPublisherFailHandler",value:function(n){return _.defined(n,"Publisher Fail Handler must be provided"),this._onPublisherFailHandler=n,this}},{key:"setMuted",value:function(n){return _.defined(n,"Is Muted must be provided"),_.boolean(n,"Is Muted must be a boolean"),this._isMuted=n,this}},{key:"setMaxBatchSize",value:function(n){return _.defined(n,"Max Batch Size must be provided"),_.number(n,"Max Batch Size must be a number"),_.ok(n>0,"Max Batch Size must be higher than 0"),this._maxBatchSize=n,this}},{key:"setGlobalBatchQueue",value:function(n){return _.defined(n,"Global Batch Queue must be provided"),_.ok(n instanceof Sn,"Global Batch Queue must be an instance of BatchQueue"),this._globalBatchQueue=n,this}},{key:"withEventTransformer",value:function(n){return _.defined(n,"Event Transformer must be provided"),_.func(n,"Event Transformer must be a function"),this._eventTransformer=n,this}},{key:"withPayloadTransformer",value:function(n){return _.defined(n,"Payload Transformer must be provided"),_.func(n,"Payload Transformer must be a function"),this._payloadTransformer=n,this}},{key:"withConsentPolicyGetter",value:function(n){return _.defined(n,"Consent Policy Getter must be provided"),_.func(n,"Consent Policy Getter must be a function"),this._consentPolicyGetter=n,this}},{key:"logger",value:function(n){var r=this,i=new On({publishers:this._publishers,validators:this._validators,defaults:this._defaults,events:this._events,defaultValueTimeout:this._defaultValueTimeout,defaultContinueOnFail:this._defaultContinueOnFail,onPublisherFailHandler:this._onPublisherFailHandler,isMuted:function(){return r._isMuted},eventTransformer:this._eventTransformer,payloadTransformer:this._payloadTransformer,consentPolicyGetter:this._consentPolicyGetter,nonEssentialDefaults:this._nonEssentialDefaults,maxBatchSize:this._maxBatchSize,globalBatchQueue:this._globalBatchQueue},n);return Mn.manager.notifyLoggerCreated(i),i}}]),e}(),jn=In,ut=jn,An=rt,st=at,kn=Ce;z.BiLoggerFactory=ut,z.BiLogger=An,z.BiLoggerManager=st.BiLoggerManager,z.factory=function(){return new ut},z.manager=st.manager,z.createBatchQueue=function(){return new kn};var se={},L={},D={};Object.defineProperty(D,"__esModule",{value:!0}),D.readCookie=D.sendBeacon=D.getWindowSize=D.getDesktopSize=D.now=void 0;function Fn(){return typeof performance<"u"&&performance&&performance.now?performance.now():-1}D.now=Fn;function Ln(e){var t=e.screen&&e.screen.width||0,n=e.screen&&e.screen.height||0;return"".concat(t,"x").concat(n)}D.getDesktopSize=Ln;function Hn(e){var t=0,n=0;return e.innerWidth?(t=e.innerWidth,n=e.innerHeight):e.document&&(e.document.documentElement&&e.document.documentElement.clientWidth?(t=e.document.documentElement.clientWidth,n=e.document.documentElement.clientHeight):e.document.body&&e.document.body.clientWidth&&(t=e.document.body.clientWidth,n=e.document.body.clientHeight)),"".concat(t,"x").concat(n)}D.getWindowSize=Hn;function Nn(e,t){return typeof navigator>"u"||!navigator||!navigator.sendBeacon?!1:navigator.sendBeacon(e,t)}D.sendBeacon=Nn;function $n(e){if(typeof document>"u")return null;for(var t=document.cookie.split(";"),n=0,r=t;n<r.length;n++){for(var i=r[n],o=i.split("="),u=o[0],s=o[1];u[0]===" ";)u=u.substr(1);if(u===e)return s}return""}D.readCookie=$n;var w={},ce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultCommonConfig=e.BrandToHostMap=e.HeadlessHost=e.DefaultBrand=e.EventContextMap=e.BackofficeDomains=e.LoggerVersion=void 0,e.LoggerVersion="2.0.985|C",e.BackofficeDomains=[".wix.com",".editorx.com"],function(t){t.msid="_msid",t.clientId="_client_id",t.uuid="_uuid",t.visitorId="_visitorId",t.siteMemberId="_siteMemberId",t.brandId="_brandId",t.siteBranchId="_siteBranchId",t.ms="_ms",t.lv="_lv",t.isHeadless="_isHeadless",t.hostingPlatform="_hostingPlatform"}(e.EventContextMap||(e.EventContextMap={})),e.DefaultBrand="wix",e.HeadlessHost="VIEWER_HEADLESS",e.BrandToHostMap={wix:"wix",editorx:"editorx"},e.DefaultCommonConfig={brand:e.DefaultBrand}})(ce),Object.defineProperty(w,"__esModule",{value:!0}),w.getGlobal=w.getWindowIfTop=w.isBackoffice=w.isWebWorker=w.getHost=w.setHost=void 0;var ee=ce,Oe,Me;function Wn(e){Oe=e}w.setHost=Wn;function Qn(e){if(e===void 0&&(e=ee.DefaultBrand),Oe)return Oe;var t="";return typeof Me>"u"&&(Me=ft(function(n){if(!n.location||!n.location.hostname)return null;var r=n.location.hostname.match(/\.(wix|editorx)\.com$/)||[],i=r[1];return i||null},null)),t=Me||ee.BrandToHostMap[e]||ee.BrandToHostMap[ee.DefaultBrand],"frog.".concat(t,".com")}w.getHost=Qn;function zn(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}w.isWebWorker=zn;function Vn(){return ct(function(e){var t=e.document;return ee.BackofficeDomains.some(function(n){return t.location.host.indexOf(n)!==-1})})}w.isBackoffice=Vn;function ct(e){if(typeof window<"u"&&window)try{return window.top===window.self?e?e(window):window:null}catch{return null}return null}w.getWindowIfTop=ct;function ft(e,t){return t===void 0&&(t=null),typeof self<"u"&&self&&e(self)||t}w.getGlobal=ft,Object.defineProperty(L,"__esModule",{value:!0}),L.guid=L.buildBiUrl=L.getCookies=void 0;var Gn=D,Un=w,qn=0;function Rn(e){return Object.keys(e).reduce(function(t,n){var r=typeof e[n]=="string"?{name:e[n]}:e[n],i=r.name,o=r.transform,u=o===void 0?function(a){return a}:o,s=u((0,Gn.readCookie)(i));return s&&(t[n]=s),t},{})}L.getCookies=Rn;function xn(e,t,n){var r=e.host,i=r===void 0?"":r,o=e.endpoint,u=o===void 0?"":o;n===void 0&&(n={}),i=typeof i=="function"?i():i,i=i||(0,Un.getHost)(),u=n.endpoint||u,n.useBatch||(t._=""+new Date().getTime()+qn++);var s=n.useBatch?[]:Object.keys(t).map(function(a){return"".concat(encodeURIComponent(a),"=").concat(encodeURIComponent(t[a]))},[]);return["//".concat(i,"/").concat(u)].concat(s.length?s.join("&"):[]).join("?")}L.buildBiUrl=xn;function Jn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}L.guid=Jn;var fe={};Object.defineProperty(fe,"__esModule",{value:!0}),fe.listen=void 0;var le=w;function Xn(e,t,n){if(!(!e||!e[t])){var r=e[t];e[t]=function(){return n.apply(null,arguments),r.apply(e,arguments)}}}function Yn(e){setTimeout(function(){return(0,le.getWindowIfTop)(function(t){return e(t.location.href)})})}function Zn(e){(0,le.getWindowIfTop)(function(t){var n=t.history;return["pushState","replaceState"].forEach(function(r){Xn(n,r,function(i,o,u){return e(u)})})})}function Kn(e){(0,le.getWindowIfTop)(function(t){return t.addEventListener("popstate",function(){return e(t.location.href)})})}function er(e){(0,le.getWindowIfTop)(function(t){var n=t.document.referrer;[Yn,Zn,Kn].forEach(function(r){return r(function(i){e(n,i),n=i})})})}fe.listen=er,Object.defineProperty(se,"__esModule",{value:!0}),se.track=void 0;var tr=L,nr=fe,te=w,lt=D,dt="__isTrackingPageViews__",rr="p",ir=19,or=3;function ar(e){return e||!(0,te.isWebWorker)()&&(0,te.isBackoffice)()&&(0,te.getWindowIfTop)(function(t){return!t[dt]})}function ur(){return(0,te.getWindowIfTop)(function(e){return e[dt]=!0})}function sr(e){return e({endpoint:rr}).updateDefaults({src:ir,evid:or,vsi:(0,tr.guid)()}).logger()}function cr(e){var t=sr(e),n=1;(0,nr.listen)(function(r,i){var o=(0,te.getWindowIfTop)(function(a){return{sr:(0,lt.getDesktopSize)(a),wr:(0,lt.getWindowSize)(a)}}),u=o.sr,s=o.wr;t.log({from:r,to:i,fis:n,sr:u,wr:s}),n=0})}function fr(e,t){t===void 0&&(t={force:!1}),ar(t.force)&&(ur(),cr(e))}se.track=fr;var ht={},vt={policy:"getCurrentConsentPolicy",header:"_getConsentPolicyHeader",isMethod:!0},lr={policy:"consentPolicy",header:"consentPolicyHeader",isMethod:!1},dr={essential:!0,dataToThirdParty:!0,advertising:!0,functional:!0,analytics:!0},O;function hr(){return[mr,yr,gr,vr].forEach(function(e){try{O||(O=e())}catch{}}),O}function vr(){return window}function gr(){return self}function yr(){return global}function mr(){return globalThis}function Se(e){e===void 0&&(e=void 0),e&&(O=e),!O&&!e&&(O=hr());var t;try{typeof O.commonConfig=="object"&&O.commonConfig.consentPolicy&&(t=Ie(O.commonConfig,lr)),!t&&typeof O.consentPolicyManager=="object"&&(t=Ie(O.consentPolicyManager,vt)),!t&&typeof O.Wix=="object"&&typeof O.Wix.Utils=="object"&&typeof O.Wix.Utils.getCurrentConsentPolicy=="function"&&(t=Ie(O.Wix.Utils,vt))}catch{}return t}function Ie(e,t){return{getCurrentConsentPolicy:function(){var n=e[t.policy];return t.isMethod?n():n},_getConsentPolicyHeader:function(){var n=e[t.header];return t.isMethod?n():n},deleteReference:!t.isMethod}}var pr=function(){function e(t){t&&(this.env=t),this.consentPolicyAccess=Se(this.env)}return e.prototype.clearReference=function(){this.consentPolicyAccess&&this.consentPolicyAccess.deleteReference&&(this.consentPolicyAccess=void 0)},e.prototype.getCurrentConsentPolicy=function(){this.consentPolicyAccess||(this.consentPolicyAccess=Se(this.env));var t=this.consentPolicyAccess&&this.consentPolicyAccess.getCurrentConsentPolicy()||dr;return this.clearReference(),t.policy?t.policy:t},e.prototype.getConsentPolicyHeader=function(t){t===void 0&&(t=!1),this.consentPolicyAccess||(this.consentPolicyAccess=Se(this.env));var n=this.consentPolicyAccess&&this.consentPolicyAccess._getConsentPolicyHeader()||{"consent-policy":""};return this.clearReference(),t?n["consent-policy"]:n},e}();const _r=Nt(Object.freeze(Object.defineProperty({__proto__:null,ConsentPolicyAccessor:pr},Symbol.toStringTag,{value:"Module"})));var V={},G={},gt=P&&P.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.APINotSupportedError=G.AssertionError=void 0;var br=function(e){gt(t,e);function t(n){var r=e.call(this,n)||this;return r.name=r.constructor.name,r}return t}(Error);G.AssertionError=br;var Pr=function(e){gt(t,e);function t(n){var r=e.call(this,n)||this;return r.name=r.constructor.name,r}return t}(Error);G.APINotSupportedError=Pr,Object.defineProperty(V,"__esModule",{value:!0}),V.ok=V.object=V.defined=void 0;var je=G,wr=function(e,t){if(e===void 0)throw new je.AssertionError(t)};V.defined=wr;var Tr=function(e,t){if(e!==void 0&&(typeof e!="object"||Array.isArray(e)||e===null))throw new je.AssertionError(t)};V.object=Tr;var Er=function(e,t){if(!e)throw new je.AssertionError(t)};V.ok=Er;var yt={},de={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Errors=e.EventCategories=e.PublishMethods=void 0,function(t){t.Auto="auto",t.PostMessage="postMessage",t.Fetch="fetch"}(e.PublishMethods||(e.PublishMethods={})),function(t){t.Essential="essential",t.Functional="functional",t.Analytics="analytics"}(e.EventCategories||(e.EventCategories={})),function(t){t[t.Unsupported=0]="Unsupported"}(e.Errors||(e.Errors={}))})(de);var j={};Object.defineProperty(j,"__esModule",{value:!0}),j.postMessageTransport=j.xhrTransport=j.fetchTransport=j.pixelTransport=j.beaconTransport=void 0;var Br=D,Cr=G;function Dr(e,t,n){return n===void 0&&(n=!1),new Promise(function(r,i){return(0,Br.sendBeacon)(e,n?JSON.stringify(t):void 0)?r():i(new Error("Transport Error: Cannot send bi using beacon"))})}j.beaconTransport=Dr;function Or(e,t){return new Promise(function(n,r){var i=t||new window.Image(0,0);i.onload=function(){return n()},i.onerror=function(){return r(new Error("Transport Error: Cannot send bi using pixel"))},i.src=e})}j.pixelTransport=Or;function Mr(e,t,n,r){if(n===void 0&&(n="GET"),typeof r>"u"){if(typeof fetch>"u")return Promise.reject(new Cr.APINotSupportedError("fetch"));r=fetch}var i={method:n,credentials:"include"};return n==="POST"?i.body=JSON.stringify(t):i.keepalive=!0,r(e,i).then(function(o){if(!o.ok)throw Error("Transport Error: Cannot send bi using fetch. Status: ".concat(o.status))})}j.fetchTransport=Mr;function Sr(e,t,n){return n===void 0&&(n="GET"),new Promise(function(r,i){var o=new XMLHttpRequest;o.open(n,"".concat(location.protocol).concat(e)),o.onload=r,o.onerror=function(){i(new Error("Transport Error: Cannot send bi using xhr."))},o.withCredentials=!0,n==="POST"?o.send(JSON.stringify(t)):o.send()})}j.xhrTransport=Sr;function Ir(e,t){t===void 0&&(t=self.postMessage);var n=[e];return typeof WorkerGlobalScope>"u"&&n.push("*"),t.apply(self,n)}j.postMessageTransport=Ir,function(e){var t=P&&P.__assign||function(){return t=Object.assign||function(l){for(var c,y=1,v=arguments.length;y<v;y++){c=arguments[y];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(l[m]=c[m])}return l},t.apply(this,arguments)},n=P&&P.__rest||function(l,c){var y={};for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&c.indexOf(v)<0&&(y[v]=l[v]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,v=Object.getOwnPropertySymbols(l);m<v.length;m++)c.indexOf(v[m])<0&&Object.prototype.propertyIsEnumerable.call(l,v[m])&&(y[v[m]]=l[v[m]]);return y};Object.defineProperty(e,"__esModule",{value:!0}),e.getTransformers=e.getPublisher=e.postMessagePublisher=e.xhrPublisher=e.fetchPublisher=e.beaconPublisher=e.imagePublisher=e.resolvePublisher=void 0;var r=L,i=w,o=G,u=de,s=j,a=function(l){return l.useBatch?"POST":"GET"},f=function(l,c){var y,v;return l.publishMethod===u.PublishMethods.PostMessage?(y=p,v=c&&c[u.PublishMethods.PostMessage]):l.publishMethod===u.PublishMethods.Fetch?(y=g,v=c&&c[u.PublishMethods.Fetch]):(0,i.isWebWorker)()?y=g:y=h,y(l,v)};e.resolvePublisher=f;function d(l){return l===void 0&&(l={}),function(y,v){if(v===void 0&&(v={}),v.useBatch)throw new o.APINotSupportedError("Can't use image publisher to send batched events.");var m=(0,r.buildBiUrl)(l,y,v);return(0,s.pixelTransport)(m,v.image)}}e.imagePublisher=d;function h(l){return l===void 0&&(l={}),function(y,v){v===void 0&&(v={});var m=(0,r.buildBiUrl)(l,y,v);return(0,s.beaconTransport)(m,y,!!v.useBatch).catch(function(){var M=a(v);return v.useBatch?(0,s.fetchTransport)(m,y,M).catch(function(I){return I instanceof o.APINotSupportedError?(0,s.xhrTransport)(m,y,M):Promise.reject(I)}):(0,s.pixelTransport)(m,v.image)})}}e.beaconPublisher=h;function g(l,c){return l===void 0&&(l={}),function(v,m){m===void 0&&(m={});var M=(0,r.buildBiUrl)(l,v,m),I=a(m);return(0,s.fetchTransport)(M,v,I,c).catch(function($){return $ instanceof o.APINotSupportedError?(0,s.xhrTransport)(M,v,I):Promise.reject($)})}}e.fetchPublisher=g;function b(l){return l===void 0&&(l={}),function(y,v){v===void 0&&(v={});var m=(0,r.buildBiUrl)(l,y,v),M=a(v);return(0,s.xhrTransport)(m,y,M)}}e.xhrPublisher=b;function p(l,c){return function(v){return(0,s.postMessageTransport)(v,c)}}e.postMessagePublisher=p;function B(l,c){return(0,e.resolvePublisher)(l,c)}e.getPublisher=B;var N=function(l,c){var y,v;c&&(typeof c!="function"&&c.postMessage&&l.publishMethod===u.PublishMethods.PostMessage?v=c.postMessage:typeof c=="function"&&(y=c));var m=y,M=function(I,$){if($.useBatch){var Lr=function(X){return(X==null?void 0:X.endpoint)||$.endpoint||l.endpoint};I.e=I.e.map(function(X){var Hr=X.context,bt=n(X,["context"]),Nr=t(t({},bt),{f:t(t({},bt.f),{_rp:Lr(Hr)})});return Nr})}return v?v(I):I};return{eventTransformer:m,payloadTransformer:M}};e.getTransformers=N}(yt);var Ae={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getWixHost=e.getBranchId=e.getBrand=e.getCommonConfigValue=void 0;var t=w,n=ce,r=function(){return(0,t.getGlobal)(function(a){return a.Wix&&a.Wix.Utils&&a.Wix.Utils.commonConfig||a.commonConfig})},i=function(a,f){return f===void 0&&(f=r()),f=f&&typeof f.getAll=="function"?f.getAll():f,!f||typeof f[a]>"u"?n.DefaultCommonConfig[a]:f[a]};e.getCommonConfigValue=i;var o=function(a){return(0,e.getCommonConfigValue)("brand",a())};e.getBrand=o;var u=function(a){return(0,e.getCommonConfigValue)("branchId",a())};e.getBranchId=u;var s=function(a){return(0,e.getCommonConfigValue)("host",a())};e.getWixHost=s})(Ae);var mt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getCommonDefaults=e.getUserDefaults=e.transformDefaults=void 0;var t=ce,n=D,r=Ae,i=L,o=function(f){return Object.keys(f).reduce(function(d,h){var g=t.EventContextMap[h]||h;return d[g]=f[h],d},{})};e.transformDefaults=o;var u=function(){return(0,i.getCookies)({clientId:"_wixCIDX",uuid:{name:"_wixUIDX",transform:function(f){return typeof f=="string"&&f.split("|")[1]}}})};e.getUserDefaults=u;var s=function(f,d){return(0,e.transformDefaults)({brandId:function(){return(0,r.getBrand)(f)},siteBranchId:function(){return(0,r.getBranchId)(f)},ms:function(){return Math.round((0,n.now)())},isHeadless:function(){return a(f)},hostingPlatform:function(){return(0,r.getWixHost)(f)},lv:t.LoggerVersion})};e.getCommonDefaults=s;var a=function(f){return(0,r.getWixHost)(f)===t.HeadlessHost||void 0}})(mt),function(e){var t=P&&P.__assign||function(){return t=Object.assign||function(l){for(var c,y=1,v=arguments.length;y<v;y++){c=arguments[y];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(l[m]=c[m])}return l},t.apply(this,arguments)},n=P&&P.__createBinding||(Object.create?function(l,c,y,v){v===void 0&&(v=y);var m=Object.getOwnPropertyDescriptor(c,y);(!m||("get"in m?!c.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return c[y]}}),Object.defineProperty(l,v,m)}:function(l,c,y,v){v===void 0&&(v=y),l[v]=c[y]}),r=P&&P.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),i=P&&P.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var y in l)y!=="default"&&Object.prototype.hasOwnProperty.call(l,y)&&n(c,l,y);return r(c,l),c};Object.defineProperty(e,"__esModule",{value:!0}),e.BiLoggerClientFactory=e.createBatchQueue=e.manager=e.factory=e.Factory=e.setHost=e.EventCategories=e.PublishMethods=void 0;var o=z,u=_r,s=i(V),a=yt,f=Ae,d=w,h=de,g=mt,b=de;Object.defineProperty(e,"PublishMethods",{enumerable:!0,get:function(){return b.PublishMethods}}),Object.defineProperty(e,"EventCategories",{enumerable:!0,get:function(){return b.EventCategories}});var p=w;Object.defineProperty(e,"setHost",{enumerable:!0,get:function(){return p.setHost}});var B=function(){function l(c){c===void 0&&(c={}),this.options=c,this.commonConfigGetter=function(){},this.initialized=!1,s.ok(!c.publishMethod||Object.keys(h.PublishMethods).map(function(y){return h.PublishMethods[y]}).indexOf(c.publishMethod)!==-1,'Unsupported publish method "'.concat(c.publishMethod,'"')),l.consentPolicyAccessor=l.consentPolicyAccessor||new u.ConsentPolicyAccessor,this.loggerClientFactory=(0,o.factory)()}return l.prototype.initFactory=function(){var c=this;if(this.initialized)return this.loggerClientFactory;this.initialized=!0,this.updateDefaults((0,g.getCommonDefaults)(this.commonConfigGetter,l.consentPolicyAccessor)),this.withUserContext((0,g.getUserDefaults)());var y=t(t({},this.options),{host:this.options.host||function(){return(0,d.getHost)((0,f.getBrand)(c.commonConfigGetter))}}),v=(0,a.getPublisher)(y,this.publishFunctions),m=(0,a.getTransformers)(y,this.transformer),M=m.eventTransformer,I=m.payloadTransformer,$=this.loggerClientFactory.addPublisher(v).withConsentPolicyGetter(function(){return l.consentPolicyAccessor.getCurrentConsentPolicy()});return M&&$.withEventTransformer(M),I&&$.withPayloadTransformer(I),$},l.prototype.withTransformer=function(c){return s.defined(c,"Transformer must be provided"),s.ok(typeof c=="function"||c&&typeof c[h.PublishMethods.PostMessage]=="function","Valid transformer must be provided"),this.transformer=c,this},l.prototype.withPublishFunction=function(c){return s.defined(c,"Publish functions object must be provided"),s.ok(this.options.publishMethod&&this.options.publishMethod!==h.PublishMethods.Auto,"Publish function can be used only when using a custom publish method"),s.ok(c&&typeof c[this.options.publishMethod]=="function","Valid publish function must be provided"),this.publishFunctions=c,this},l.prototype.withUserContext=function(c){return s.defined(c,"User context object must be provided"),this.updateDefaults((0,g.transformDefaults)(c)),this},l.prototype.withUoUContext=function(c){return s.defined(c,"UoU context object must be provided"),this.updateDefaults((0,g.transformDefaults)(c)),this},l.prototype.withNonEssentialContext=function(c){return s.defined(c,"Non-essential context object must be provided"),this.loggerClientFactory.updateNonEssentialDefaults((0,g.transformDefaults)(c)),this},l.prototype.withCommonConfigGetter=function(c){return s.defined(c,"Common config getter must be provided"),s.ok(typeof c=="function","Common config getter must be a function"),this.commonConfigGetter=c,this},l.prototype.updateDefaults=function(c){return this.loggerClientFactory.updateDefaults(c),this},l.prototype.setMuted=function(c){return this.loggerClientFactory.setMuted(c),this},l.prototype.setEvents=function(c){return this.loggerClientFactory.setEvents(c),this},l.prototype.setGlobalBatchQueue=function(c){return this.loggerClientFactory.setGlobalBatchQueue(c),this},l.prototype.onError=function(c){return this.loggerClientFactory.setPublisherFailHandler(c),this},l.prototype.logger=function(c){c===void 0&&(c={});var y=this.options,v=y.endpoint,m=y.useBatch,M=this.initFactory().logger(t({endpoint:v,useBatch:m},c));return M},l}();e.Factory=B;var N=function(l){return l===void 0&&(l={}),new B(l)};e.factory=N,e.manager=o.manager,e.createBatchQueue=o.createBatchQueue,e.BiLoggerClientFactory=o.BiLoggerFactory}(ht),function(e){var t=P&&P.__createBinding||(Object.create?function(a,f,d,h){h===void 0&&(h=d);var g=Object.getOwnPropertyDescriptor(f,d);(!g||("get"in g?!f.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return f[d]}}),Object.defineProperty(a,h,g)}:function(a,f,d,h){h===void 0&&(h=d),a[h]=f[d]}),n=P&&P.__setModuleDefault||(Object.create?function(a,f){Object.defineProperty(a,"default",{enumerable:!0,value:f})}:function(a,f){a.default=f}),r=P&&P.__importStar||function(a){if(a&&a.__esModule)return a;var f={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&t(f,a,d);return n(f,a),f};Object.defineProperty(e,"__esModule",{value:!0}),e.BiLoggerClientFactory=e.EventCategories=e.createBatchQueue=e.manager=e.setHost=e.factory=void 0;var i=z,o=r(se),u=r(ht),s=function(a){a===void 0&&(a={});var f=a.trackSession||typeof a.trackSession>"u";return f&&o.track(u.factory,{force:f==="force"}),u.factory(a)};e.factory=s,e.setHost=u.setHost,e.manager=i.manager,e.createBatchQueue=i.createBatchQueue,e.EventCategories=u.EventCategories,e.BiLoggerClientFactory=u.BiLoggerClientFactory,e.default={factory:e.factory,setHost:u.setHost,manager:i.manager,createBatchQueue:i.createBatchQueue,EventCategories:u.EventCategories,BiLoggerClientFactory:u.BiLoggerClientFactory}}(Xe);const jr=Ht(Xe),Ar=((pt=document.currentScript)==null?void 0:pt.getAttribute("data-platform"))||"viewer",kr=((_t=document.currentScript)==null?void 0:_t.getAttribute("data-metadata"))||"{}";let ke;try{ke=JSON.parse(kr)}catch{ke={}}const Fr=jr.factory().logger();new Lt(Ar,Fr,ke)});
